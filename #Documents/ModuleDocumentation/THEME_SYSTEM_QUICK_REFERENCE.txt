THEME SYSTEM - QUICK REFERENCE CARD (UPDATED)
==============================================

LAYOUT FILE LOCATIONS (UPDATED):
---------------------------------
✅ Main Site Layout:
   resources/views/components/layout.blade.php
   Used by: Home, blog, main navigation
   
✅ Jokes Module Layout:
   resources/views/jokes/layout.blade.php
   Used by: All jokes and jokecats pages

Each module's layout is NOW IN ITS OWN FOLDER for easy finding!


BLADE @extends SYNTAX:
----------------------
In joke views:        @extends('jokes.layout')
In main site views:   @extends('components.layout')

The dot (.) represents folder structure:
'jokes.layout' → resources/views/jokes/layout.blade.php


THE CORE CONCEPT:
-----------------
Your site has TWO frameworks:
1. Livewire/Flux (main site) - uses 'flux.appearance' in localStorage
2. Bootstrap (jokes) - uses 'theme' in localStorage

To keep them synced, ALWAYS:
✓ READ from all three keys (in priority order)
✓ WRITE to all three keys (simultaneously)
✓ APPLY using both methods (.dark class + data attributes)


THE THREE KEYS:
---------------
localStorage.getItem('flux.appearance')    ← Check FIRST (main site uses this)
localStorage.getItem('flux:appearance')    ← Check SECOND (compatibility)
localStorage.getItem('theme')              ← Check THIRD (Bootstrap uses this)


READING (Use Everywhere):
-------------------------
const theme = localStorage.getItem('flux.appearance') ||
              localStorage.getItem('flux:appearance') ||
              localStorage.getItem('theme') ||
              'light';


WRITING (Use When Toggling):
-----------------------------
localStorage.setItem('flux.appearance', newTheme);  // Main site
localStorage.setItem('flux:appearance', newTheme);  // Compatibility
localStorage.setItem('theme', newTheme);            // Bootstrap


APPLYING (Do Both):
-------------------
if (theme === 'dark') {
    html.classList.add('dark');                        // Tailwind
    html.setAttribute('data-bs-theme', 'dark');        // Bootstrap
    html.setAttribute('data-theme', 'dark');           // Generic
    html.setAttribute('flux:appearance', 'dark');      // Flux
}


WHY THREE KEYS?
---------------
✓ 'flux.appearance' - Your main site (Livewire/Flux) looks here
✓ 'flux:appearance' - Some Flux configs use colon instead of dot
✓ 'theme' - Bootstrap and generic modules look here

Writing to all three = everything stays synchronized!


CSS FOR YELLOW SUN:
-------------------
[data-bs-theme="dark"] #themeIcon.bi-sun {
    color: #ffc107 !important;  /* YELLOW */
}

[data-bs-theme="light"] #themeIcon.bi-moon-stars {
    color: #212529 !important;  /* DARK */
}


FILE ORGANIZATION BEST PRACTICES:
----------------------------------
✅ DO: Put each module's layout IN that module's folder
   Example: resources/views/jokes/layout.blade.php

❌ DON'T: Put all layouts in resources/views/
   Confusing: Which layout.blade.php is for which module?

✅ DO: Use descriptive @extends
   Example: @extends('jokes.layout')

❌ DON'T: Use generic @extends
   Example: @extends('layout') ← Which layout?


MOVING A LAYOUT TO ITS MODULE:
-------------------------------
# Move file
mv resources/views/layout.blade.php resources/views/jokes/layout.blade.php

# Update all views to extend new location
sed -i "s/@extends('layout')/@extends('jokes.layout')/g" resources/views/jokes/*.blade.php


TESTING CHECKLIST:
------------------
□ Change theme on main site → Go to jokes → Theme matches?
□ Change theme on jokes → Go to main site → Theme matches?
□ Refresh any page → Theme persists?
□ Sun icon is yellow in dark mode?
□ Moon icon is dark in light mode?
□ All joke pages still load correctly?
□ Check @extends directive in all views is correct?


DEBUGGING IN CONSOLE:
----------------------
// See what's stored
console.log({
    'flux.appearance': localStorage.getItem('flux.appearance'),
    'flux:appearance': localStorage.getItem('flux:appearance'),
    'theme': localStorage.getItem('theme')
});

// Check which layout is being used (look in page source)
// Search for: @extends or look at file comments

// Verify view file extends correct layout
// In terminal:
grep "@extends" resources/views/jokes/*.blade.php

// Manually set dark mode
localStorage.setItem('flux.appearance', 'dark');
localStorage.setItem('flux:appearance', 'dark');
localStorage.setItem('theme', 'dark');
location.reload();


ADDING NEW MODULES:
-------------------
1. Create: resources/views/mymodule/
2. Create: resources/views/mymodule/layout.blade.php
3. Copy theme code from jokes or main layout
4. Create views that @extends('mymodule.layout')
5. Test theme sync with other modules


REMEMBER:
---------
1. Layouts IN module folders (easy to find!)
2. Always READ from all three keys (in order)
3. Always WRITE to all three keys (simultaneously)
4. Always APPLY using both methods
5. Use @extends('module.layout') not @extends('layout')
6. Test theme sync between all modules
